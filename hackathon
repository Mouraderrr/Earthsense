<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EarthSense - Urban Planning Intelligence</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f4f4; color:#222; }
  header { background:#003366; color:white; text-align:center; padding:2rem; }
  h1, h2 { margin:0; }
  section { margin:20px; padding:20px; background:white; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
  h2 { color:#003366; margin-bottom:10px; }
  table { width:100%; border-collapse:collapse; margin-top:10px; }
  table th, table td { border:1px solid #ddd; padding:8px; text-align:center; }
  table th { background-color:#0055aa; color:white; }
  button { padding:8px 15px; border:none; border-radius:5px; background:#0055aa; color:white; cursor:pointer; margin-top:5px; }
  button:hover { background:#003366; }
  footer { background:#003366; color:white; text-align:center; padding:20px; margin-top:20px; }
  #map { width:100%; height:400px; border-radius:10px; border:1px solid #ccc; margin-top:10px; }
  .alert { color:red; font-weight:bold; }
  ul { list-style:none; padding-left:0; }
  ul li { margin-bottom:5px; }
</style>
</head>
<body>

<header>
  <h1>EarthSense</h1>
  <p>Urban Planning Intelligence</p>
</header>

<section id="city-overview">
  <h2>Manama, Capital</h2>
  <button id="compare-city">Compare City</button>
  <div id="alerts">
    <p class="alert">High UV Index Alert: UV index is currently high. Recommend outdoor activity precautions for urban planning site visits.</p>
    <p class="alert">Weather Data Error: Unable to fetch weather data. Please check your API configuration.</p>
  </div>
</section>

<section id="interactive-map">
  <h2>Interactive Environmental Map</h2>
  <p>Lat: 26.2285, Lng: 50.5860</p>
  <div id="map-layers">
    <ul>
      <li>Vegetation Index</li>
      <li>Surface Temperature</li>
      <li>Air Quality</li>
      <li>Urban Heat Islands</li>
    </ul>
  </div>
  <iframe id="map" src="https://earth.nullschool.net/#current/wind/surface/level/orthographic=-30.00,25.00,2500/loc=50.55,26.02"></iframe>
</section>

<section id="metrics">
  <h2>Urban Planning Metrics</h2>
  <ul>
    <li>Quality of Life: 8.4 (+0.3 this year)</li>
    <li>Green Space: 26% (+4% growth)</li>
    <li>Walkability: 89 (+8 points)</li>
    <li>Sustainability: A-</li>
    <li>Water Quality: pH 7.3 (Excellent)</li>
    <li>Noise Levels: 64 dB (Moderate)</li>
    <li>Tree Canopy: 33% (Growing)</li>
  </ul>
</section>

<section id="temperature-trends">
  <h2>Temperature Trends (Last 30 Days)</h2>
  <p>Average: 76°F | High: 94°F | Low: 58°F</p>
</section>

<section id="air-quality">
  <h2>Air Quality Index (Last 30 Days)</h2>
  <p>Average: 42 AQI | Best: 28 AQI | Worst: 65 AQI</p>
</section>

<section id="city-comparison">
  <h2>City Comparison</h2>
  <table>
    <thead>
      <tr>
        <th>Metric</th>
        <th>Manama</th>
        <th>Muharraq</th>
        <th>Riffa</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>Air Quality (AQI)</td><td>65</td><td>20</td><td>28</td></tr>
      <tr><td>Green Space %</td><td>26%</td><td>36%</td><td>38%</td></tr>
      <tr><td>Avg Temperature</td><td>83°F</td><td>79°F</td><td>82°F</td></tr>
      <tr><td>Walkability Score</td><td>89</td><td>64</td><td>76</td></tr>
      <tr><td>Quality of Life</td><td>8.4/10</td><td>7.7/10</td><td>8.5/10</td></tr>
      <tr><td>Population Growth</td><td>↑ 4.1%</td><td>↑ 3.8%</td><td>↑ 4.5%</td></tr>
    </tbody>
  </table>
</section>

<section id="recommendations">
  <h2>Recommendations</h2>
  <ul>
    <li>Increase Green Coverage – High Priority (Impact Score: 8.5)</li>
    <li>Expand Water Features – Medium Priority (Impact Score: 7.2)</li>
    <li>Solar Energy Initiative – High Priority (Impact Score: 9.1)</li>
  </ul>
</section>

<section id="data-sources">
  <h2>Data Sources & Attribution</h2>
  <ul>
    <li>Weather Data: OpenWeather API (Real-time updates)</li>
    <li>Earth Science: NASA POWER (Daily updates)</li>
    <li>Air Quality: EPA AirNow API (Hourly updates)</li>
    <li>Vegetation Index: Landsat 8/9 (16-day cycle)</li>
  </ul>
</section>

<footer>
  <p>EarthSense • Empowering sustainable urban development through Earth science data and real-time environmental monitoring.</p>
  <p>© 2024 EarthSense Urban Planning. Built for NASA Space Apps Challenge.</p>
</footer>

<script>
  // --- Map layer switching ---
  const mapFrame = document.getElementById('map');
  function setMapLayer(layer) {
    let base = 'https://earth.nullschool.net/#current/';
    switch(layer) {
      case 'wind':
        mapFrame.src = base + 'wind/surface/level/orthographic=-30.00,25.00,2500/loc=50.55,26.02';
        break;
      case 'temperature':
        mapFrame.src = base + 'temp/surface/level/orthographic=-30.00,25.00,2500/loc=50.55,26.02';
        break;
      case 'precipitation':
        mapFrame.src = base + 'precip/surface/level/orthographic=-30.00,25.00,2500/loc=50.55,26.02';
        break;
      default:
        mapFrame.src = base + 'wind/surface/level/orthographic=-30.00,25.00,2500/loc=50.55,26.02';
    }
  }

  // --- City comparison highlight ---
  document.querySelectorAll('#city-comparison tbody tr').forEach(row=>{
    row.addEventListener('click', ()=>{
      row.style.backgroundColor = row.style.backgroundColor === 'lightyellow' ? '' : 'lightyellow';
    });
  });

  // --- Compare City button ---
  document.getElementById('compare-city').addEventListener('click', ()=>{
    alert("City comparison panel would open here.");
  });

  // --- Metric hover interactivity ---
  const metrics = document.querySelectorAll('#metrics li');
  metrics.forEach(metric=>{
    metric.addEventListener('mouseover', ()=>{
      metric.style.color = '#0055aa';
      metric.style.fontWeight = 'bold';
    });
    metric.addEventListener('mouseout', ()=>{
      metric.style.color = '#222';
      metric.style.fontWeight = 'normal';
    });
  });
</script>

</body>
</html>
